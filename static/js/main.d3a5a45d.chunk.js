(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{36:function(e,t,s){},37:function(e,t,s){},38:function(e,t,s){},64:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),r=s(30),c=s.n(r),o=(s(36),s(2)),i=(s(37),s(38),s(10)),l=s(12),d=s(5),j=s.n(d),u=s(0);var m=function(e){var t=Object(a.useState)(""),s=Object(o.a)(t,2),n=(s[0],s[1]),r=Object(a.useState)(""),c=Object(o.a)(r,2),d=(c[0],c[1]),m=new l.a;return Object(u.jsx)("div",{className:"wrapper fadeInDown",children:Object(u.jsxs)("div",{id:"formContent",children:[Object(u.jsx)("div",{className:"fadeIn first",children:Object(u.jsx)("img",{src:"https://cdn.icon-icons.com/icons2/2621/PNG/512/brand_facebook_messenger_icon_157342.png",id:"icon",alt:"User Icon"})}),Object(u.jsxs)("form",{onSubmit:function(e){j.a.post("https://abirs-django-chatapp.herokuapp.com/accounts/getAuthToken",{username:e.target[0].value,password:e.target[1].value}).then((function(t){if(console.log(JSON.stringify(t.data)),'{"detail":"Incorrect credentials"}'==JSON.stringify(t.data))alert("Incorrect credentials");else{m.set("username",e.target[0].value,{path:"/"}),m.set("password",e.target[1].value,{path:"/"}),m.set("token",JSON.stringify(t.data),{path:"/"});j.a.get("https://abirs-django-chatapp.herokuapp.com/accounts/fetchSingleUser/".concat(e.target[0].value)).then((function(e){console.log(e.data.username),localStorage.setItem("userID",e.data.username),window.location.href="/chattingApp/#/message/inbox"}))}})),e.preventDefault()},children:[Object(u.jsx)("input",{type:"text",onChange:function(e){return n(e.target.value)},id:"login",className:"fadeIn second",name:"login",placeholder:"Email"}),Object(u.jsx)("input",{type:"text",onChange:function(e){return d(e.target.value)},id:"password",className:"fadeIn third",name:"login",placeholder:"Password"}),Object(u.jsx)("input",{type:"submit",className:"fadeIn fourth",value:"Log In"})]}),Object(u.jsxs)("div",{id:"formFooter",children:[Object(u.jsx)(i.b,{to:"",href:"#",children:"Forgot Password?"}),Object(u.jsx)("br",{}),Object(u.jsx)(i.b,{to:"/register",className:"underlineHover",href:"#",children:"Create an Account"})]})]})})},h=s(14),b=s.n(h),g=s(16);var p=function(e){return Object(u.jsx)("a",{onClick:function(){window.location.href="/chattingApp/#/message/".concat(e.user.email),e.setstoreUser(e.user.email),e.setstoreUserID(e.user.username),localStorage.setItem("storeUser",e.user.email),localStorage.setItem("storeUserID",e.user.username)},className:"list-group-item list-group-item-action border-0 m-3",children:Object(u.jsxs)("div",{className:"d-flex align-items-start",children:[Object(u.jsx)("img",{src:"https://bootdey.com/img/Content/avatar/avatar5.png",className:"rounded-circle mr-1",alt:"Vanessa Tucker",width:"40",height:"40"}),Object(u.jsx)("div",{className:"flex-grow-1 ml-3",children:e.user.name})]})})};var x=function(e){var t=Object(a.useState)([]),s=Object(o.a)(t,2),n=s[0],r=s[1];return Object(a.useEffect)((function(){function e(){return(e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("https://abirs-django-chatapp.herokuapp.com/accounts/fetchUsers");case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),console.log(n),Object(u.jsxs)("div",{className:"col-12 col-lg-5 col-xl-3 border-right",children:[Object(u.jsx)("div",{className:"px-4 d-none d-md-block",children:Object(u.jsx)("div",{className:"d-flex align-items-center",children:Object(u.jsxs)("div",{className:"d-flex",children:[Object(u.jsx)("input",{type:"text",className:"form-control my-4 p-2",placeholder:"Search..."}),Object(u.jsx)("button",{className:"btn btn-primary btn-sm my-4",children:"Search"})]})})}),Object(u.jsx)("div",{style:{overflowY:"scroll",height:"500px"},children:n.map((function(t){return Object(u.jsx)(p,{setstoreUserID:e.setstoreUserID,user:t,setstoreUser:e.setstoreUser})}))}),Object(u.jsx)("hr",{className:"d-block d-lg-none mt-1 mb-0"})]})};var O=function(e){var t=Object(a.useState)([]),s=Object(o.a)(t,2),n=(s[0],s[1]),r=new l.a,c="";return c=""==e.storeUser?localStorage.getItem("storeUser"):e.storeUser,Object(a.useEffect)((function(){j.a.get("http://127.0.01:8000/accounts/fetchSingleUser/".concat(r.get("username",{path:"/"}))).then((function(e){n(e.data)}))}),[]),Object(u.jsx)("div",{className:"py-2 px-4 border-bottom d-none d-lg-block",children:Object(u.jsxs)("div",{className:"d-flex align-items-center py-1",children:[Object(u.jsx)("div",{className:"position-relative mr-5",children:Object(u.jsx)("img",{src:"https://bootdey.com/img/Content/avatar/avatar3.png",className:"rounded-circle mr-1",alt:"Sharon Lessman",width:"40",height:"40"})}),Object(u.jsx)("div",{className:"flex-grow-1 pl-5",children:Object(u.jsx)("strong",{children:c})}),Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:"btn btn-primary btn-lg mr-1 mx-3",children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"feather feather-phone feather-lg",children:Object(u.jsx)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})}),Object(u.jsx)("button",{className:"btn btn-info btn-lg mr-1 mx-3 d-none d-md-inline-block",children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"feather feather-video feather-lg",children:[Object(u.jsx)("polygon",{points:"23 7 16 12 23 17 23 7"}),Object(u.jsx)("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})]})}),!0===e.isLoggedIn&&Object(u.jsx)("button",{className:"btn btn-dark border btn-lg mx-3",onClick:function(){e.setisLoggedIn(!1),r.remove("username",{path:"/"}),r.remove("password",{path:"/"}),window.location.href="/#"},children:"Logout"})]})]})})};var f=function(e){return Object(u.jsxs)("div",{className:"chat-message-right pb-4",children:[Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"text-muted small text-nowrap mt-2",children:e.dateTime})}),Object(u.jsxs)("div",{className:"flex-shrink-1 bg-dark text-light rounded py-2 px-3 mr-3",children:[Object(u.jsx)("div",{className:"text-muted text-sm mb-2",children:Object(u.jsx)("b",{children:"YOU"})}),e.text]})]})};var v=function(e){return Object(u.jsxs)("div",{className:"chat-message-left pb-4",children:[Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"text-muted small text-nowrap mt-2",children:e.dateTime})}),Object(u.jsxs)("div",{className:"flex-shrink-1 bg-light rounded py-2 px-3 mr-3",children:[Object(u.jsx)("div",{className:"text-muted text-sm mb-2",children:Object(u.jsx)("b",{children:"HE/SHE"})}),e.text]})]})};var N=function(e){var t=Object(a.useState)([]),s=Object(o.a)(t,2),n=s[0],r=s[1],c=JSON.parse(localStorage.getItem("userData")),i=Object(a.useState)(""),l=Object(o.a)(i,2),d=(l[0],l[1]),m="";return m=""==e.storeUser?localStorage.getItem("storeUserID"):e.storeUserID,Object(a.useEffect)((function(){function e(){return(e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("https://abirs-django-chatapp.herokuapp.com/fetchText/".concat(m,"/").concat(c.username));case 2:t=e.sent,document.getElementById("textBox").scrollTo(0,1e10),r(t.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}setInterval((function(){return e.apply(this,arguments)}),1e3)}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"position-relative",children:Object(u.jsx)("div",{className:"chat-messages p-4",id:"textBox",style:{overflowY:"scroll",height:"400px"},children:n.map((function(e){return Object(u.jsx)(u.Fragment,{children:e.sender===c.username?Object(u.jsx)(f,{text:e.text,dateTime:e.dateTime,sender:e.sender,reciever:e.recvr}):Object(u.jsx)(v,{text:e.text,dateTime:e.dateTime,sender:e.recvr,reciever:e.sender})})}))})}),Object(u.jsx)("div",{className:"flex-grow-0 py-3 px-4 border-top",children:Object(u.jsxs)("form",{onSubmit:function(e){j.a.post("https://abirs-django-chatapp.herokuapp.com/texting",{text:e.target[0].value,sender:c.username,recvr:m}).then((function(e){console.log(e.data),document.getElementById("messageBoxx").value=""})),e.preventDefault()},className:"input-group",children:[Object(u.jsx)("input",{type:"text",className:"form-control p-2",placeholder:"Type your message",id:"messageBoxx",onChange:function(e){d(e.target.value)}}),Object(u.jsx)("button",{className:"btn btn-primary my-1",children:"Send"})]})})]})};var I=function(e){return Object(u.jsxs)("div",{className:"col-12 col-lg-7 col-xl-9",children:[Object(u.jsx)(O,{storeUser:e.storeUser,isLoggedIn:e.isLoggedIn,setisLoggedIn:e.setisLoggedIn}),Object(u.jsx)(N,{storeUserID:e.storeUserID,storeUser:e.storeUser,userData:e.userData})]})},w=s(3);var y=function(e){return Object(u.jsx)("main",{className:"content",children:Object(u.jsxs)("div",{className:"container p-0",children:[Object(u.jsx)("h1",{className:"h3 mb-3",children:e.userData.name}),Object(u.jsx)("div",{className:"card",children:Object(u.jsxs)("div",{className:"row g-0",children:[Object(u.jsx)(x,{setstoreUser:e.setstoreUser,setstoreUserID:e.setstoreUserID}),Object(u.jsx)(i.a,{children:Object(u.jsxs)(w.c,{children:[Object(u.jsx)(w.a,{exact:!0,path:"/message/:user",children:Object(u.jsx)(I,{storeUserID:e.storeUserID,isLoggedIn:e.isLoggedIn,userData:e.userData,storeUser:e.storeUser,setstoreUser:e.setstoreUser,setisLoggedIn:e.setisLoggedIn})}),Object(u.jsx)(w.a,{exact:!0,path:"/message/messages",children:"Your inbox"})]})})]})})]})})};var U=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),s=(t[0],t[1]),n=Object(a.useState)(""),r=Object(o.a)(n,2),c=(r[0],r[1]),l=Object(a.useState)(""),d=Object(o.a)(l,2),m=(d[0],d[1]),h=Object(a.useState)(""),b=Object(o.a)(h,2),g=(b[0],b[1]),p=Object(a.useState)(""),x=Object(o.a)(p,2),O=(x[0],x[1]),f=Object(a.useState)(""),v=Object(o.a)(f,2),N=(v[0],v[1]);return Object(u.jsx)("div",{className:"wrapper fadeInDown",children:Object(u.jsxs)("div",{id:"formContent",children:[Object(u.jsx)("div",{className:"fadeIn first",children:Object(u.jsx)("img",{src:"https://cdn.icon-icons.com/icons2/2621/PNG/512/brand_facebook_messenger_icon_157342.png",id:"icon",alt:"User Icon"})}),Object(u.jsxs)("form",{onSubmit:function(e){console.log(e.target[4].value),console.log(e.target[5].value),e.target[4].value===e.target[5].value?j.a.post("https://abirs-django-chatapp.herokuapp.com/accounts/registerUser",{first_name:e.target[0].value,last_name:e.target[1].value,username:e.target[2].value,password:e.target[5].value,email:e.target[2].value,contact:e.target[3].value}).then((function(e){console.log(e.data),alert("Created account successfully! Please go to the Log in page to login to your account"),window.location.href="/chattingApp/"})):alert("Passwords doesnot match"),e.preventDefault()},children:[Object(u.jsx)("input",{type:"text",id:"fname",className:"fadeIn second",name:"name",onChange:function(e){return m(e.target.value)},placeholder:"First Name"}),Object(u.jsx)("input",{type:"text",id:"lname",className:"fadeIn second",name:"name",onChange:function(e){return O(e.target.value)},placeholder:"Last Name"}),Object(u.jsx)("input",{type:"email",id:"email",className:"fadeIn second",name:"email",onChange:function(e){return s(e.target.value)},placeholder:"Email"}),Object(u.jsx)("input",{type:"tel",id:"contact",className:"fadeIn second",name:"contact",onChange:function(e){return N(e.target.value)},placeholder:"Contact"}),Object(u.jsx)("input",{type:"text",id:"password",className:"fadeIn third",name:"login",onChange:function(e){return c(e.target.value)},placeholder:"Password"}),Object(u.jsx)("input",{type:"text",id:"c-password",className:"fadeIn third",name:"login",onChange:function(e){return g(e.target.value)},placeholder:"Confirm Password"}),Object(u.jsx)("input",{type:"submit",className:"fadeIn fourth",value:"Sign Up"})]}),Object(u.jsx)("div",{id:"formFooter",children:Object(u.jsx)(i.b,{to:"/",className:"underlineHover",children:"Login"})})]})})};var S=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),s=t[0],n=t[1],r=Object(a.useState)(""),c=Object(o.a)(r,2),d=c[0],h=c[1],b=Object(a.useState)(""),g=Object(o.a)(b,2),p=g[0],x=g[1],O=Object(a.useState)([]),f=Object(o.a)(O,2),v=f[0],N=f[1],I=new l.a,S=I.get("username",{path:"/"});return I.get("password",{path:"/"}),Object(a.useEffect)((function(){j.a.get("https://abirs-django-chatapp.herokuapp.com/accounts/fetchSingleUser/".concat(S)).then((function(e){N(e.data),localStorage.setItem("userData",JSON.stringify(e.data))}))}),[]),Object(a.useEffect)((function(){n(void 0!==S)}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("br",{}),Object(u.jsx)(i.a,{children:Object(u.jsxs)(w.c,{children:[Object(u.jsx)(w.a,{exact:!0,path:"/",children:Object(u.jsx)(m,{isLoggedIn:s,setisLoggedIn:n})}),Object(u.jsx)(w.a,{exact:!0,path:"/register",children:Object(u.jsx)(U,{isLoggedIn:s,setisLoggedIn:n})}),Object(u.jsx)(w.a,{exact:!0,path:"/message/:type",children:Object(u.jsx)(y,{storeUserID:p,setstoreUserID:x,isLoggedIn:s,setisLoggedIn:n,storeUser:d,setstoreUser:h,userData:v})})]})})]})},k=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,65)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),a(e),n(e),r(e),c(e)}))};c.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("root")),k()}},[[64,1,2]]]);
//# sourceMappingURL=main.d3a5a45d.chunk.js.map